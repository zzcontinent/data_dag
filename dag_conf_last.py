# !/usr/bin/env python
# -*- coding: utf-8 -*-
import sys

reload(sys)
sys.setdefaultencoding('utf-8')

NODES = [

 {'nodes': {1: {'color': 'lightblue', 'name': 'SQL', 'desc': '\n        select sum(tta.m),sum(tta.days) ,\nsum(tta.m)/sum(tta.days),\nleft(entry_dt,7) as month\nfrom\n(\nselect\nbegin_dt,end_dt,entry_dt,leave_dt,\ncase when entry_dt>end_dt then 0\nwhen entry_dt>=begin_dt and end_dt<=leave_dt and leave_dt is not null then datediff(end_dt,entry_dt)\nwhen entry_dt>=begin_dt and leave_dt is null then datediff(end_dt,entry_dt)\nwhen entry_dt>=begin_dt and end_dt>=leave_dt and   leave_dt is not null  then datediff(end_dt,entry_dt)\nwhen entry_dt<begin_dt and end_dt<=leave_dt and leave_dt is not null then datediff(end_dt,begin_dt)\nwhen entry_dt<begin_dt and leave_dt is null then datediff(end_dt,begin_dt)\nwhen entry_dt<begin_dt and end_dt>=leave_dt and  leave_dt is not null then datediff(leave_dt,begin_dt)\nend +1 as `days`,agent_amt/100 as `m`\nfrom league_bill\nwhere\nstore_sp_id!=1006\n) tta\ngroup by left(entry_dt,7);\n        '}, 2: {'color': 'blue', 'name': '#meta121', 'desc': u'\u8868 | ( SELECT begin_dt end_dt entry_dt leave_dt #meta122 + 1 AS `days` agent_amt / 100 AS `m` FROM league_bill WHERE store_sp_id! = 1006 )'}, 3: {'color': 'blue', 'name': u'league_bill', 'desc': '\xe8\xa1\xa8'}, 4: {'color': 'orange', 'name': u'leave_dt', 'desc': '\xe5\xad\x97\xe6\xae\xb5'}, 5: {'color': 'orange', 'name': u'agent_amt / 100', 'desc': '\xe5\xad\x97\xe6\xae\xb5'}, 6: {'color': 'orange', 'name': u'begin_dt', 'desc': '\xe5\xad\x97\xe6\xae\xb5'}, 7: {'color': 'orange', 'name': '#meta112', 'desc': u'\u5b57\u6bb5 | sum ( tta.m ) / sum ( tta.days ) '}, 8: {'color': 'orange', 'name': '#meta110', 'desc': u'\u5b57\u6bb5 | sum ( tta.m ) '}, 9: {'color': 'orange', 'name': '#meta111', 'desc': u'\u5b57\u6bb5 | sum ( tta.days ) '}, 10: {'color': 'orange', 'name': '#meta114', 'desc': u'\u5b57\u6bb5 | left ( entry_dt 7 ) '}, 11: {'color': 'orange', 'name': u'entry_dt', 'desc': '\xe5\xad\x97\xe6\xae\xb5'}, 12: {'color': 'orange', 'name': u'end_dt', 'desc': '\xe5\xad\x97\xe6\xae\xb5'}, 'ts': {'color': 'red', 'name': '\xe5\xbc\x80\xe5\xa7\x8b', 'desc': '\xe5\xbc\x80\xe5\xa7\x8b'}, 14: {'color': 'pink', 'name': u'`m`', 'desc': '\xe5\xad\x97\xe6\xae\xb5\xe5\x88\xab\xe5\x90\x8d'}, 13: {'color': 'orange', 'name': '#meta122', 'desc': u'\u5b57\u6bb5 | CASE WHEN entry_dt>end_dt THEN 0 WHEN entry_dt> = begin_dt AND end_dt< = leave_dt AND leave_dt IS NOT NULL THEN datediff ( end_dt entry_dt ) WHEN entry_dt> = begin_dt AND leave_dt IS NULL THEN datediff ( end_dt entry_dt ) WHEN entry_dt> = begin_dt AND end_dt> = leave_dt AND leave_dt IS NOT NULL THEN datediff ( end_dt entry_dt ) WHEN entry_dt<begin_dt AND end_dt< = leave_dt AND leave_dt IS NOT NULL THEN datediff ( end_dt begin_dt ) WHEN entry_dt<begin_dt AND leave_dt IS NULL THEN datediff ( end_dt begin_dt ) WHEN entry_dt<begin_dt AND end_dt> = leave_dt AND leave_dt IS NOT NULL THEN datediff ( leave_dt begin_dt ) END + 1 '}, 16: {'color': 'pink', 'name': u'MONTH', 'desc': '\xe5\xad\x97\xe6\xae\xb5\xe5\x88\xab\xe5\x90\x8d'}, 15: {'color': 'pink', 'name': u'`days`', 'desc': '\xe5\xad\x97\xe6\xae\xb5\xe5\x88\xab\xe5\x90\x8d'}}, 'dag': 'ts >> 1 \n5 >> 14\n13 >> 15\n10 >> 16\n3 >> 4\n3 >> 5\n3 >> 6\n2 >> 7\n2 >> 8\n2 >> 9\n2 >> 10\n3 >> 11\n3 >> 12\n3 >> 13\n2 >> 3\n1 >> 2', 'title': '\xe6\xb5\x8b\xe8\xaf\x95'},]
